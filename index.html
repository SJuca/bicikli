<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8" />
<title>C++ Animáció – Olíva–Okker MIX</title>
<style>
    body {
        margin: 0;
        font-family: Consolas, monospace;
        background: #3F4F2F;
        color: #E8ECD9;
        display: flex;
        height: 100vh;
        overflow: hidden;
    }

    /* BAL PANEL */
    #leftPanel {
        width: 40%;
        background: #3F4F2F;
        padding: 20px;
        overflow-y: auto;
        border-right: 3px solid #566B34;
        position: relative;
        display: flex;
        flex-direction: column;
    }

    pre {
        white-space: pre-wrap;
        font-size: 15px;
        line-height: 1.4;
    }

    .code-line {
        padding: 3px 6px;
        border-left: 4px solid transparent;
    }

    .active-line {
        background: #D9B65E33;
        border-left: 4px solid #D9B65E;
    }

    /* TIMELINE BAL ALUL */
    #timeline {
        margin-top: auto;
        padding-top: 16px;
        display: flex;
        gap: 4px;
        flex-wrap: wrap;
    }

    .tl-item {
        width: 28px;
        height: 28px;
        background: #5D6F3A;
        border-radius: 4px;
        text-align: center;
        line-height: 28px;
        cursor: pointer;
        color: white;
        font-size: 13px;
    }

    .tl-active {
        background: #C9971A !important;
        color: #1F2418;
        font-weight: bold;
    }

    /* JOBB PANEL */
    #rightPanel {
        width: 60%;
        background: #E8ECD9;
        color: #1F2418;
        padding: 20px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: flex-start;
    }

    /* Gombok – KÉK VERZIÓ elrendezés: oszlopban jobb oldalon */
    .task-buttons {
        display: flex;
        flex-direction: column;
        gap: 8px;
        width: 140px;
        margin-bottom: 20px;
    }

    .task-buttons button {
        background: #5D6F3A;
        border: none;
        padding: 10px;
        color: white;
        cursor: pointer;
        border-radius: 6px;
        font-size: 14px;
        width: 100%;
    }

    .task-buttons button:hover {
        background: #6F8450;
    }

    /* NAVIGÁCIÓ – KÉK VERZIÓ oldalt */
    .nav-buttons {
        display: flex;
        flex-direction: column;
        gap: 8px;
        width: 140px;
        margin-bottom: 20px;
    }

    .nav-buttons button {
        padding: 10px;
        font-size: 14px;
        background: #5D6F3A;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        width: 100%;
    }

    .nav-buttons button:hover {
        background: #6F8450;
    }

    /* TÖBBI TARTALOM JOBB OLDALT */
    #vars, #console {
        width: 100%;
        margin-left: auto;
    }

    .varbox {
        display: inline-block;
        min-width: 120px;
        padding: 10px;
        margin: 6px;
        background: #566B34;
        color: #E8ECD9;
        border-radius: 6px;
        font-size: 14px;
    }

    #console {
        background: #F7F8EE;
        padding: 12px;
        margin-top: 20px;
        border-radius: 6px;
        min-height: 160px;
        white-space: pre-wrap;
    }
</style>
</head>
<body>

<!-- BAL PANEL -->
<div id="leftPanel">
    <div id="code"></div>
    <div id="timeline" style="position:absolute; left:20px; bottom:20px;"></div>
</div>

<!-- JOBB PANEL -->
<div id="rightPanel">
    <div class="task-buttons" style="display:flex; flex-direction:column; gap:10px; position:absolute; right:20px; top:20px;">
        <button onclick="setTask(2)">2. feladat</button>
        <button onclick="setTask(3)">3. feladat</button>
        <button onclick="setTask(4)">4. feladat</button>
    </div>

    <div class="nav-buttons" style="display:flex; flex-direction:column; gap:10px; position:absolute; right:20px; top:180px;">
        <button onclick="step(-1)">-1</button>
        <button onclick="step(1)">+1</button>
        <button onclick="step(10)">+10</button>
        <button onclick="resetTimeline()">Reset</button>
    </div>

    <h3>Változók</h3>
    <div id="vars"></div>

    <h3>Konzol</h3>
    <div id="console"></div>
</div>

<script>
const meres = [36,48,39,-1,30,43,-1,76,67,82,73,75,64,73,69,63];
const ido = ["6:15","6:30","6:45","7:00","7:15","7:30","7:45","8:00","8:15","8:30","8:45","9:00","9:15","9:30","9:45","10:00"];

let currentTask = 2;
let indexPos = 0;
const maxIndex = 15;

// ===================== KÓD =====================
const codeLines = [
"int meres[16]={36,48,39,-1,30,43,-1,76,67,82,73,75,64,73,69,63};",
"string ido[16]={...};",
"// 2. feladat – összegzés",
"if (meres[i] > 0)",
"    osszeg += meres[i];",
"// 3. feladat – óránkénti összeg",
"if (meres[i] < 0)",
"    bic += 0;",
"else",
"    bic += meres[i];",
"if (i % 4 == 3)",
"    cout << ora << ' órától ' << bic;",
"// 4. feladat – maximum",
"if (meres[i] > legn)",
"{",
"    legn = meres[i];",
"    index = i;",
"}"
];

function renderCode(activeLine) {
    let html = "";
    codeLines.forEach((line, idx) => {
        html += `<div class='code-line ${idx===activeLine?"active-line":""}'>${line}</div>`;
    });
    document.getElementById("code").innerHTML = `<pre>${html}</pre>`;
}

// ===================== TIMELINE =====================
function renderTimeline() {
    let html = "";
    for (let i=0; i<=15; i++) {
        html += `<div class='tl-item ${i===indexPos?"tl-active":""}' onclick='jump(${i})'>${i}</div>`;
    }
    document.getElementById("timeline").innerHTML = html;
}

function jump(i) {
    indexPos = i;
    compute();
}

// ===================== LÉPTETÉS =====================
function step(n) {
    let newPos = indexPos + n;
    if (newPos > maxIndex) {
        indexPos = maxIndex;
        alert("Nincs több adat!");
    } else if (newPos < 0) {
        indexPos = 0;
    } else indexPos = newPos;
    compute();
}

function resetTimeline() {
    indexPos = 0;
    compute();
}

// ===================== FELADAT =====================
function setTask(t) {
    currentTask = t;
    resetTimeline();
}

// ===================== SZÁMÍTÁS =====================
function compute() {
    renderTimeline();

    let i = indexPos;
    let vars = {};
    let consoleText = "";
    let highlight = null;

    if (currentTask === 2) {
        let osszeg = 0;
        for (let k=0; k<=i; k++) {
            if (meres[k] > 0) { osszeg += meres[k]; highlight = 4; }
            else highlight = 3;
        }
        vars = { i, "meres[i]": meres[i], osszeg };
        consoleText = `2. feladat
Összesen eddig: ${osszeg} kerékpáros`;
    }

    else if (currentTask === 3) {
        let ora = 6;
        let bic = 0;
        let blocks = [];

        for (let k=0;k<=i;k++){
            if (meres[k] < 0){ bic += 0; highlight = 6;} else { bic += meres[k]; highlight = 9; }
            if (k % 4 === 3){ blocks.push(`${ora} órától ${bic} kerékpáros`); bic = 0; ora++; highlight = 11; }
        }

        vars = { i, "meres[i]": meres[i], ora, bic };
        consoleText = "3. feladat
Óránkénti mérés:
" + blocks.join("
");
    }

    else if (currentTask === 4) {
        let legn = meres[0];
        let idx = 0;
        let lines = [];

        for (let k=0;k<=i;k++){
            if (meres[k] > legn){ legn = meres[k]; idx = k; highlight = 14; }
            else highlight = 13;
        }

        lines.push(`Legnagyobb érték: ${legn}`);
        lines.push(`Időpont: ${ido[idx]}`);
        lines.push(`Index: ${idx}`);

        vars = { i, "meres[i]": meres[i], legn, index: idx };
        consoleText = "4. feladat
" + lines.join("
");
    }

    renderCode(highlight);

    let vb = "";
    for (let k in vars) vb += `<div class='varbox'>${k}: <b>${vars[k]}</b></div>`;
    document.getElementById("vars").innerHTML = vb;

    document.getElementById("console").textContent = consoleText;
}

compute();
</script>
</body>
</html>
