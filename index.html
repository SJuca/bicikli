<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8" />
<title>C++ Animáció – Olíva–Okker</title>
<style>
    body {
        margin: 0;
        font-family: Consolas, monospace;
        background: #3F4F2F;
        color: #E8ECD9;
        display: flex;
        height: 100vh;
        overflow: hidden;
    }

    /* Bal oldali programsáv */
    #leftPanel {
        width: 40%;
        background: #3F4F2F;
        padding: 20px;
        overflow-y: auto;
        border-right: 3px solid #566B34;
    }

    pre {
        white-space: pre-wrap;
        font-size: 15px;
        line-height: 1.4;
    }

    .code-line {
        padding: 3px 6px;
        border-left: 4px solid transparent;
    }

    .active-line {
        background: #D9B65E33;
        border-left: 4px solid #D9B65E;
    }

    /* Jobb oldali tartalom */
    #rightPanel {
        width: 60%;
        background: #E8ECD9;
        color: #1F2418;
        padding: 20px;
        overflow-y: auto;
    }

    .task-buttons button {
        background: #5D6F3A;
        border: none;
        padding: 10px 16px;
        margin-right: 8px;
        color: white;
        cursor: pointer;
        border-radius: 6px;
        font-size: 14px;
    }

    .task-buttons button:hover {
        background: #6F8450;
    }

    /* Változóboxok */
    .varbox {
        display: inline-block;
        min-width: 120px;
        padding: 10px;
        margin: 6px;
        background: #566B34;
        color: #E8ECD9;
        border-radius: 6px;
        font-size: 14px;
    }

    /* Timeline */
    #timeline {
        margin-top: 20px;
        display: flex;
        gap: 4px;
    }

    .tl-item {
        width: 28px;
        height: 28px;
        background: #5D6F3A;
        border-radius: 4px;
        text-align: center;
        line-height: 28px;
        cursor: pointer;
        color: white;
        font-size: 13px;
    }

    .tl-active {
        background: #C9971A !important;
        color: #1F2418;
        font-weight: bold;
    }

    /* Konzol */
    #console {
        background: #F7F8EE;
        padding: 12px;
        margin-top: 20px;
        border-radius: 6px;
        min-height: 160px;
        white-space: pre-wrap;
        font-family: Consolas, monospace;
        font-size: 15px;
    }

    /* Navigáció */
    .nav-buttons button {
        padding: 8px 14px;
        margin-right: 6px;
        font-size: 14px;
        background: #5D6F3A;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
    }

    .nav-buttons button:hover {
        background: #6F8450;
    }
</style>
</head>
<body>

<!-- BAL PANEL: KÓD -->
<div id="leftPanel"></div>

<!-- JOBB PANEL -->
<div id="rightPanel">
    <div class="task-buttons">
        <button onclick="setTask(2)">2. feladat</button>
        <button onclick="setTask(3)">3. feladat</button>
        <button onclick="setTask(4)">4. feladat</button>
    </div>

    <div class="nav-buttons">
        <button onclick="step(-1)">-1</button>
        <button onclick="step(1)">+1</button>
        <button onclick="step(10)">+10</button>
        <button onclick="resetTimeline()">Reset</button>
    </div>

    <div id="timeline"></div>

    <h3>Változók</h3>
    <div id="vars"></div>

    <h3>Konzol</h3>
    <div id="console"></div>
</div>

<script>
// ======================
// PROGRAM ADATOK
// ======================
const meres = [36,48,39,-1,30,43,-1,76,67,82,73,75,64,73,69,63];
const ido = ["6:15","6:30","6:45","7:00","7:15","7:30","7:45","8:00","8:15","8:30","8:45","9:00","9:15","9:30","9:45","10:00"];

let currentTask = 2;
let indexPos = 0;
const maxIndex = 15;

// ======================
// KÓD MEGJELENÍTÉS
// ======================
const codeLines = [
    "int meres[16]={36,48,39,-1,30,43,-1,76,67,82,73,75,64,73,69,63};",
    "string ido[16]={...};",
    "// 2. feladat – összegzés",
    "if (meres[i] > 0)",
    "    osszeg += meres[i];",
    "// 3. feladat – óránkénti összeg",
    "if (meres[i] < 0)",
    "    bic += 0;",
    "else",
    "    bic += meres[i];",
    "if (i % 4 == 3)",
    "    cout << ora << \" órától \" << bic;",
    "// 4. feladat – maximum",
    "if (meres[i] > legn)",
    "{",
    "    legn = meres[i];",
    "    index = i;",
    "}"
];

function renderCode(activeLine) {
    let html = "";
    codeLines.forEach((line, idx) => {
        html += `<div class='code-line ${idx===activeLine?"active-line":""}'>${line}</div>`;
    });
    document.getElementById("leftPanel").innerHTML = `<pre>${html}</pre>`;
}

// ======================
// TIMELINE
// ======================
function renderTimeline() {
    let html = "";
    for (let i=0; i<=15; i++) {
        html += `<div class='tl-item ${i===indexPos?"tl-active":""}' onclick='jump(${i})'>${i}</div>`;
    }
    document.getElementById("timeline").innerHTML = html;
}

function jump(i) {
    indexPos = i;
    compute();
}

// ======================
// NAGY LÉPTETŐK
// ======================
function step(n) {
    let newPos = indexPos + n;

    if (newPos > maxIndex) {
        indexPos = maxIndex;
        alert("Nincs több adat ennél a feladatnál!");
    }
    else if (newPos < 0) {
        indexPos = 0;
    }
    else {
        indexPos = newPos;
    }

    compute();
}

function resetTimeline() {
    indexPos = 0;
    compute();
}

// ======================
// FELADAT VÁLTÁS
// ======================
function setTask(t) {
    currentTask = t;
    resetTimeline();
}

// ======================
// FŐ SZÁMÍTÁS
// ======================
function compute() {
    renderTimeline();

    let i = indexPos;
    let vars = {};
    let consoleText = "";
    let highlight = null;

    if (currentTask === 2) {
        let osszeg = 0;
        for (let k=0; k<=i; k++) {
            if (meres[k] > 0) {
                osszeg += meres[k];
                highlight = 4;
            } else highlight = 3;
        }
        vars = { i, "meres[i]": meres[i], osszeg };
        consoleText = `2. feladat\nÖsszesen eddig: ${osszeg} kerékpáros`;
    }

    else if (currentTask === 3) {
        let ora = 6;
        let bic = 0;
        let blocks = [];

        for (let k=0; k<=i; k++) {
            if (meres[k] < 0) {
                bic += 0;
                highlight = 6;
            }
            else {
                bic += meres[k];
                highlight = 9;
            }

            if (k % 4 === 3) {
                blocks.push(`${ora} órától ${bic} kerékpáros`);
                bic = 0;
                ora++;
                highlight = 11;
            }
        }

        vars = { i, "meres[i]": meres[i], ora, bic };
        consoleText = "3. feladat\nÓránkénti mérések:\n" + blocks.join("\n");
    }

    else if (currentTask === 4) {
        let legn = meres[0];
        let idx = 0;

        for (let k=0; k<=i; k++) {
            if (meres[k] > legn) {
                legn = meres[k];
                idx = k;
                highlight = 14;
            } else highlight = 13;
        }

        vars = { i, "meres[i]": meres[i], legn, index: idx };

        consoleText = `4. feladat\nLegnagyobb forgalom:\nÉrték: ${legn}\nIdőpont: ${ido[idx]}\nIndex: ${idx}`;
    }

    renderCode(highlight);

    // Változóboxok kirajzolása
    let vb = "";
    for (let k in vars) {
        vb += `<div class='varbox'>${k}: <b>${vars[k]}</b></div>`;
    }
    document.getElementById("vars").innerHTML = vb;

    document.getElementById("console").textContent = consoleText;
}

compute();
</script>

</body>
</html>

